@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html, body, #root {
    @apply h-full;
  }

  body {
    @apply m-0 bg-bg text-text font-sans;
  }

  /* Accessibility: Focus Styles */
  *:focus {
    @apply outline-2 outline-gold outline-offset-2;
  }

  *:focus:not(:focus-visible) {
    @apply outline-none;
  }

  *:focus-visible {
    @apply outline-2 outline-gold outline-offset-2;
  }

  button:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible {
    @apply outline-2 outline-gold outline-offset-2 shadow-[0_0_0_4px_rgba(225,184,102,0.2)];
  }
}

@layer components {
  /* Skip to main content link for keyboard navigation */
  .skip-to-main {
    @apply absolute -top-10 left-0 bg-gold text-bg px-4 py-2 no-underline z-[9999] rounded-br;
  }

  .skip-to-main:focus {
    @apply top-0;
  }


  /* Custom select dropdown with arrow */
  select {
    @apply bg-[#1a1f2a] text-text border border-white/[0.12] rounded-lg px-3 py-2.5 text-sm cursor-pointer transition-all outline-none appearance-none pr-9;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%239aa3b2' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
  }

  select:hover {
    @apply border-white/[0.24] bg-[#222a3a];
  }

  select:focus {
    @apply border-gold shadow-[0_0_0_3px_rgba(225,184,102,0.2)];
  }

  select option {
    @apply bg-[#1a1f2a] text-text p-2;
  }

  /* Input styling for consistency */
  input[type="text"],
  input[type="number"],
  textarea {
    @apply bg-[#1a1f2a] text-text border border-white/[0.12] rounded-lg px-3 py-2.5 text-sm transition-all outline-none;
  }

  input[type="text"]:hover,
  input[type="number"]:hover,
  textarea:hover {
    @apply border-white/[0.24] bg-[#222a3a];
  }

  input[type="text"]:focus,
  input[type="number"]:focus,
  textarea:focus {
    @apply border-gold shadow-[0_0_0_3px_rgba(225,184,102,0.2)];
  }

  /* Colorblind-friendly rarity patterns */
  .rarity-common {
    @apply border-solid !important;
  }
  .rarity-uncommon {
    @apply border-dotted border-2 !important;
  }
  .rarity-rare {
    @apply border-dashed border-2 !important;
  }
  .rarity-epic {
    @apply border-double border-[3px] !important;
  }
  .rarity-legendary {
    @apply border-solid border-[3px] shadow-[0_0_10px_currentColor] !important;
  }

  /* Tooltip with arrow */
  .tooltip {
    @apply absolute -top-2.5 left-1/2 -translate-x-1/2 -translate-y-full bg-[#2a2f3a] border border-white/20 rounded-lg px-3 py-2 text-[11px] text-text whitespace-normal z-[1000] shadow-[0_4px_12px_rgba(0,0,0,0.3)] max-w-[200px] w-max;
  }

  .tooltip::after {
    content: '';
    @apply absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-[#2a2f3a];
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .card {
      @apply border-2 border-white/30;
    }

    button {
      @apply border-2 font-bold;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}
